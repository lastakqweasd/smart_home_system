## TODO List
- DONE  æ ¹æ®å‰ç«¯å†™å‡ºæ•°æ®æ¨¡å‹ï¼Œå¯ä»¥å®ç°é€šè¿‡jsonåˆ›å»º Roomã€Deviceã€Scene ç­‰èµ„æºã€‚
  - å…·ä½“çš„è¯·æ±‚ç¤ºä¾‹å¯ä»¥çœ‹ä¸‹æ–¹
- DONE scene activate/deactiveå‡½æ•° ä¸€é”®è®¾ç½®æ‰€æœ‰çš„è®¾å¤‡(postæäº¤ä¸€ä¸ªç©ºçš„ä¸œè¥¿å°±å¯ä»¥æ¿€æ´»)
![1748877093503](image/readme/1748877093503.png)
- æ—¥å¿—
- ç™»å½•æ¨¡å—
- æµ‹è¯•æ–‡ä»¶
- 
---
## apiå‚è€ƒ
ä¸€ã€åˆ›å»º Roomï¼ˆæˆ¿é—´ï¼‰
è¯·æ±‚åœ°å€
```
POST /api/rooms/
```
è¯·æ±‚ä½“

```json
{
  "name": "ä¹¦æˆ¿"
}
```
 äºŒã€åˆ›å»º Deviceï¼ˆè®¾å¤‡ï¼‰
è¯·æ±‚åœ°å€

```
POST /api/devices/
```
è¯·æ±‚ä½“

```json
{
  "name": "ä¹¦æˆ¿å°ç¯",
  "type": "light",
  "room": 1,  // æˆ¿é—´çš„IDï¼ˆå¤–é”®ï¼‰
  "status": true,
  "extra": {
    "brightness": 80,
    "color": "#FFDD88"
  }
}
```
ğŸ”¸ æ³¨æ„äº‹é¡¹ï¼š
* `room` è¦ä¼ æˆ¿é—´çš„ `id`ã€‚
* `extra` æ˜¯ä¸€ä¸ªè‡ªç”±æ ¼å¼çš„å­—å…¸ï¼ˆJSONå¯¹è±¡ï¼‰ï¼Œå¯ä»¥å­˜ brightnessã€temperatureã€volume ç­‰å±æ€§ã€‚

ä¸‰ã€åˆ›å»º Sceneï¼ˆåœºæ™¯ï¼‰
è¯·æ±‚åœ°å€
```
POST /api/scenes/
```
è¯·æ±‚ä½“

```json
{
  "name": "å·¥ä½œæ¨¡å¼",
  "description": "æ‰“å¼€ä¹¦æˆ¿å°ç¯ï¼Œè°ƒæ•´äº®åº¦",
  "device_configs": [
    {
      "device": 6,  // è®¾å¤‡IDï¼ˆå¦‚ä¹¦æˆ¿å°ç¯ï¼‰
      "status": true,
      "config": {
        "brightness": 100
      }
    },
    {
      "device": 2,  // è®¾å¤‡IDï¼ˆå¦‚å§å®¤ç©ºè°ƒï¼‰
      "status": true,
      "config": {
        "temperature": 25
      }
    }
  ]
}
```
æ³¨æ„äº‹é¡¹ï¼š
* `device_configs` æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ è¡¨ç¤ºä¸€ä¸ªè®¾å¤‡çš„ç›®æ ‡é…ç½®ï¼›
* æ¯é¡¹éœ€è¦åŒ…æ‹¬ï¼š

  * `device`: è®¾å¤‡ IDï¼›
  * `status`: æ˜¯å¦å¼€å¯ï¼›
  * `config`: é™„åŠ å‚æ•°ï¼Œå¦‚äº®åº¦ã€æ¸©åº¦ç­‰ã€‚

å››ã€ä¿®æ”¹ï¼ˆPUT æˆ– PATCHï¼‰

å¯ä»¥é€šè¿‡ PUT æˆ– PATCH æ¥ä¿®æ”¹ä¸Šè¿°èµ„æºï¼Œæ¯”å¦‚ï¼š
ä¿®æ”¹è®¾å¤‡çŠ¶æ€
```
PATCH /api/devices/6/
```

```json
{
  "status": false
}
```
ä¿®æ”¹åœºæ™¯æè¿°

```
PATCH /api/scenes/1/
```
```json
{
  "description": "æ–°çš„æè¿°"
}
```


## å­—æ®µå¯¹ç…§è¡¨

| æ¨¡å‹      | å­—æ®µå              | ç±»å‹             | è¯´æ˜              |
| ------- | ---------------- | -------------- | --------------- |
| Room    | `name`           | string         | æˆ¿é—´åç§°            |
| Device  | `name`           | string         | è®¾å¤‡å             |
|         | `type`           | string         | ç±»å‹ï¼Œå¦‚ lightã€ac ç­‰ |
|         | `room`           | integer (å¤–é”®ID) | æ‰€å±æˆ¿é—´            |
|         | `status`         | boolean        | å¼€å…³çŠ¶æ€            |
|         | `extra`          | dict           | é…ç½®ï¼Œå¦‚äº®åº¦ã€æ¸©åº¦ç­‰      |
| Scene   | `name`           | string         | åœºæ™¯åç§°            |
|         | `description`    | string         | åœºæ™¯è¯´æ˜            |
|         | `device_configs` | list of dicts  | è®¾å¤‡ç›®æ ‡çŠ¶æ€åŠé…ç½®       |
| Configé¡¹ | `device`         | integer (å¤–é”®ID) | è¢«æ§åˆ¶çš„è®¾å¤‡          |
|         | `status`         | boolean        | æ‰“å¼€/å…³é—­           |
|         | `config`         | dict           | é¢å¤–é…ç½®ï¼Œå¦‚äº®åº¦/æ¸©åº¦ç­‰    |


